/********************************************************************
*
*	本文件是FKMMORPG的一部分。本文件版权归属FreeKnightDuzhi(王宏张)所有。
*	E-mail: duzhi5368@163.com
*	QQ: 	281862942
* 	
*	-----------------------------------------------------------------
*
*	文件名：	Singleton
*	作者：		FreeKnightDuzhi[ 王宏张 ]
*	文件说明：	
*
*	修改人:		
*	修改内容:
*********************************************************************/

#pragma once

//==================================================================================================================

#ifndef FK_NO_TEMPLATE_IMPLEMNTATION

//==================================================================================================================

namespace FK3DEngine
{
	//--------------------------------------------------------------------------------------------------------------
	template <typename T> T* Singleton<T>::mpSingleton = NULL;
	//--------------------------------------------------------------------------------------------------------------
	template <typename T> Singleton<T>::Singleton()
	{
		//如果该类已被创建
		if( mpSingleton != NULL )
		{
			Misc::ShowErrMsg( "单体模板类 %s 的唯一实例已经被创建。", __FUNCSIG__ );
		}

		mpSingleton = static_cast<T*>(this);
	}
	//--------------------------------------------------------------------------------------------------------------
	template <typename T> Singleton<T>::~Singleton()
	{
		mpSingleton = NULL;
	}
	//--------------------------------------------------------------------------------------------------------------
	template <typename T> T* Singleton<T>::GetSingletonPtr()
	{
		return mpSingleton;
	}
	//--------------------------------------------------------------------------------------------------------------
	template <typename T> T& Singleton<T>::GetSingleton()
	{
		return *mpSingleton;
	}
	//--------------------------------------------------------------------------------------------------------------
}

//==================================================================================================================


#endif	/* #ifndef FK_NO_TEMPLATE_IMPLEMNTATION */

